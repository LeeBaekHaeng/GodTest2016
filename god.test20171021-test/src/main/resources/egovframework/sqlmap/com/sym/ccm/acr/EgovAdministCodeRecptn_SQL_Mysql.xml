<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">
<!--
	수정일          수정자                          수정내용
  ===========      ========    =================================================
  2011.10.06		이기하     	 	보안 취약점 점검사항 반영 $->#변경
-->
<sqlMap namespace="AdministCodeRecptn">

    <typeAlias  alias="egovMap"                     type="egovframework.rte.psl.dataaccess.util.EgovMap"/>
    <typeAlias  alias="AdministCodeRecptn"          type="egovframework.com.sym.ccm.acr.service.AdministCodeRecptn"/>
    <typeAlias  alias="AdministCodeRecptnVO"        type="egovframework.com.sym.ccm.acr.service.AdministCodeRecptnVO"/>

    <select id="AdministCodeRecptnDAO.selectAdministCodeRecptnList" parameterClass="AdministCodeRecptnVO" resultClass="egovMap">
        <![CDATA[
            SELECT  ADMINIST_ZONE_SE
                 ,  ADMINIST_ZONE_CODE
                 ,  OCCRRNC_DE
                 ,  OPERT_SN
                 ,  CHANGE_SE_CODE
                 ,  PROCESS_SE
                 ,  ADMINIST_ZONE_NM
                 ,  LOWEST_ADMINIST_ZONE_NM
                 ,  CTPRVN_CODE
                 ,  SIGNGU_CODE
                 ,  EMD_CODE
                 ,  LI_CODE
                 ,  CREAT_DE
                 ,  ABL_DE
                 ,  ABL_ENNC
              FROM  COMTCADMINISTCODERECPTNLOG
             WHERE  1 = 1
        ]]>
        <isEqual prepend="AND" property="searchCondition" compareValue="1">
        <![CDATA[
                    ADMINIST_ZONE_NM     LIKE CONCAT ('%', #searchKeyword#,'%')
        ]]>
        </isEqual>
        <isEqual prepend="AND" property="searchCondition" compareValue="CodeList">
        <![CDATA[
                    ADMINIST_ZONE_SE     = #administZoneSe#
        ]]>
        </isEqual>
        <isEqual prepend="AND" property="searchCondition" compareValue="CodeList">
        <![CDATA[
                    ADMINIST_ZONE_CODE     = #administZoneCode#
        ]]>
        </isEqual>
            LIMIT  #recordCountPerPage# OFFSET #firstIndex#
    </select>

    <select id="AdministCodeRecptnDAO.selectAdministCodeRecptnListTotCnt" parameterClass="AdministCodeRecptnVO" resultClass="int">
        <![CDATA[
            SELECT  COUNT(*) totcnt
              FROM  COMTCADMINISTCODERECPTNLOG
             WHERE  1 = 1
        ]]>
        <isEqual prepend="AND" property="searchCondition" compareValue="1">
        <![CDATA[
                    ADMINIST_ZONE_NM     LIKE CONCAT ('%', #searchKeyword#,'%')
        ]]>
        </isEqual>
        <isEqual prepend="AND" property="searchCondition" compareValue="CodeList">
        <![CDATA[
                    ADMINIST_ZONE_SE     = #administZoneSe#
        ]]>
        </isEqual>
        <isEqual prepend="AND" property="searchCondition" compareValue="CodeList">
        <![CDATA[
                    ADMINIST_ZONE_CODE     = #administZoneCode#
        ]]>
        </isEqual>
    </select>

    <select id="AdministCodeRecptnDAO.selectAdministCodeDetail" parameterClass="AdministCodeRecptn" resultClass="AdministCodeRecptn">
        <![CDATA[
            SELECT  ADMINIST_ZONE_SE            administZoneSe
                 ,  ADMINIST_ZONE_CODE          administZoneCode
                 ,  ADMINIST_ZONE_NM            administZoneNm
                 ,  UPPER_ADMINIST_ZONE_CODE    upperAdministZoneCode
                 ,  CREAT_DE                    creatDe
                 ,  ABL_DE                      ablDe
                 ,  USE_AT                      useAt
              FROM  COMTCADMINISTCODE
             WHERE  ADMINIST_ZONE_SE   = #administZoneSe#
               AND  ADMINIST_ZONE_CODE = #administZoneCode#
        ]]>
    </select>

    <insert id="AdministCodeRecptnDAO.insertAdministCodeRecptn">
        <![CDATA[
            INSERT
              INTO  COMTCADMINISTCODERECPTNLOG
                 (  OCCRRNC_DE
                 ,  ADMINIST_ZONE_SE
                 ,  ADMINIST_ZONE_CODE
                 ,  OPERT_SN
                 ,  CHANGE_SE_CODE
                 ,  PROCESS_SE
                 ,  ADMINIST_ZONE_NM
                 ,  LOWEST_ADMINIST_ZONE_NM
                 ,  CTPRVN_CODE
                 ,  SIGNGU_CODE
                 ,  EMD_CODE
                 ,  LI_CODE
                 ,  CREAT_DE
                 ,  ABL_DE
                 ,  ABL_ENNC
                 ,  FRST_REGISTER_ID
                 ,  FRST_REGIST_PNTTM
                 ,  LAST_UPDUSR_ID
                 ,  LAST_UPDT_PNTTM
                 )
            VALUES
                 (  #occrrDe#
                 ,  #administZoneSe#
                 ,  #administZoneCode#
                 ,  #opertSn#
                 ,  #changeSeCode#
                 ,  #processSe#
                 ,  #administZoneNm#
                 ,  #lowestAdministZoneNm#
                 ,  #ctprvnCode#
                 ,  #signguCode#
                 ,  #emdCode#
                 ,  #liCode#
                 ,  #creatDe#
                 ,  #ablDe#
                 ,  #ablEnnc#
                 ,  #frstRegisterId#
                 ,  sysdate()
                 ,  #frstRegisterId#
                 ,  sysdate()
                 )
        ]]>
    </insert>

    <update id="AdministCodeRecptnDAO.updateAdministCodeRecptn">
        <![CDATA[
            UPDATE  COMTCADMINISTCODERECPTNLOG
               SET  PROCESS_SE         = #processSe#
                 ,  LAST_UPDUSR_ID     = #lastUpdusrId#
                 ,  LAST_UPDT_PNTTM  = sysdate()
             WHERE  OCCRRNC_DE           = #occrrDe#
               AND  ADMINIST_ZONE_SE   = #administZoneSe#
               AND  ADMINIST_ZONE_CODE = #administZoneCode#
               AND  OPERT_SN           = #opertSn#
        ]]>
    </update>

    <insert id="AdministCodeRecptnDAO.insertAdministCode">
            INSERT
              INTO  COMTCADMINISTCODE
                 (  ADMINIST_ZONE_SE
                 ,  ADMINIST_ZONE_CODE
                 ,  ADMINIST_ZONE_NM
                 ,  UPPER_ADMINIST_ZONE_CODE
                 ,  CREAT_DE
                 ,  ABL_DE
                 ,  USE_AT
                 ,  FRST_REGISTER_ID
                 ,  FRST_REGIST_PNTTM
                 ,  LAST_UPDUSR_ID
                 ,  LAST_UPDT_PNTTM
                 )
            VALUES
                 (  #administZoneSe#
                 ,  #administZoneCode#
                 ,  #administZoneNm#
                 ,  #upperAdministZoneCode#
                 ,  #creatDe#
                 ,  #ablDe#
                 ,  #useAt#
                 ,  #frstRegisterId#
                 ,  sysdate()
                 ,  #frstRegisterId#
                 ,  sysdate()
                 )
    </insert>

    <update id="AdministCodeRecptnDAO.updateAdministCode">
            UPDATE  COMTCADMINISTCODE
               SET  ADMINIST_ZONE_SE            = #AdministZoneSe#
                 ,  ADMINIST_ZONE_CODE          = #AdministZoneCode#
                 ,  ADMINIST_ZONE_NM            = #AdministZoneNm#
                 ,  UPPER_ADMINIST_ZONE_CODE    = #UpperAdministZoneCode#
                 ,  CREAT_DE                    = #CreatDe#
                 ,  ABL_DE                      = #AblDe#
                 ,  USE_AT                      = #useAt#
                 ,  LAST_UPDUSR_ID              = #lastUpdusrId#
                 ,  LAST_UPDT_PNTTM           = sysdate()
             WHERE  ADMINIST_ZONE_SE            = #AdministZoneSe#
               AND  ADMINIST_ZONE_CODE          = #AdministZoneCode#
    </update>

    <update id="AdministCodeRecptnDAO.deleteAdministCode">
        <![CDATA[
            UPDATE  COMTCADMINISTCODE
               SET  ABL_ENNC                    = '1'
                 ,  ABL_DE                      = #ablDe#
                 ,  LAST_UPDUSR_ID              = #lastUpdusrId#
                 ,  LAST_UPDT_PNTTM           = sysdate()
             WHERE  ADMINIST_ZONE_SE            = #AdministZoneSe#
               AND  ADMINIST_ZONE_CODE          = #AdministZoneCode#
        ]]>
    </update>

</sqlMap>